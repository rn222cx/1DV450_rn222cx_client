
<!--Search form-->
<form class="form-inline" data-ng-submit="stories.searchStories(data)">
    <input class="form-control" type="text" data-ng-model="data.searches" placeholder="Search" >
    <input class="form-control" type="text" data-ng-model="data.limit" placeholder="Limit" >
    <input class="form-control" type="text" data-ng-model="data.offset" placeholder="Offset" >
    <input class="form-control" type="text" data-ng-model="data.tag" placeholder="Tag" >
    <input class="form-control" type="text" data-ng-model="data.location" placeholder="Location" >
    <button type="submit" class="btn btn-primary">Search</button>
</form>

<!--Create new story form-->
<form class="form-inline" ng-controller="LoginController" data-ng-hide="!isUserLoggedIn()" data-ng-submit="stories.createStory(data)">
    <input class="form-control" type="text" data-ng-model="data.title" minlength="2" required placeholder="Title (required)" >
    <input class="form-control" type="text" data-ng-model="data.description" minlength="2" required placeholder="Description (required)">
    <input class="form-control" type="text" data-ng-model="data.address" placeholder="Address">
    <input class="form-control" type="text" data-ng-model="data.latitude" placeholder="Latitude">
    <input class="form-control" type="text" data-ng-model="data.longitude" placeholder="Longitude">
    <input class="form-control" type="text" data-ng-model="data.tags" placeholder="Tags">
    <button type="submit" class="btn btn-primary">Create</button>
</form>

<!--The map directive-->
<story-map></story-map>

<h3>List all stories</h3>

<table class="table table-striped">
    <thead>
        <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Place</th>
            <th>Lat</th>
            <th>Lon</th>
            <th>Tag</th>
        </tr>
    </thead>
    <tbody>
        <tr data-ng-repeat="story in stories.storyList track by $index">
            <td>{{ story.title }}</td>
            <td>{{ story.description }}</td>
            <td>{{ story.address }}</td>
            <td>{{ story.latitude}}</td>
            <td>{{ story.longitude}}</td>
            <td>
                <span data-ng-repeat="(key, value) in story.tags">
                    {{ value.name }}
                </span>
            </td>
            <td><a data-ng-href="users/{{story.creator.username}}">More info</a></td>
        </tr>
    </tbody>
</table>


<div class="paginate">
    <!--if previous page is available then show it-->
    <a ng-if="stories.storyList[0].previous_page" data-ng-click="paginate(stories.storyList[0].previous_page)"><< Previous page</a>
    <!--if next page is available then show it-->
    <a ng-if="stories.storyList[0].next_page" data-ng-click="paginate(stories.storyList[0].next_page)">Next page >></a>
</div>
